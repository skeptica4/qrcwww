-- Standalone NPC Teleportation Script
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local workspace = workspace

-- Excluded NPCs that shouldn't be teleported
local EXCLUDED_NPCS = {
	Landmine = true, Man = true, Turret = true, Stonehedge = true, Sprayer = true,
	Sentinel = true, Refugee = true, PDC = true, MADS = true, Lifeline = true,
	Hallucinator = true, Governor = true, FAST_point = true, Barrier = true,
	Platform = true, Administrator = true
}

for i = 1, 11 do
	if i ~= 8 then
		EXCLUDED_NPCS["dead guy " .. i] = true
	end
end

local getHRP = function()
	local character = LocalPlayer.Character
	return character and character:FindFirstChild("HumanoidRootPart")
end

local teleportNPCs = function()
	local hrp = getHRP()
	if not hrp then
		return
	end
	
	local playerPos = hrp.Position
	local playerForward = hrp.CFrame.LookVector
	local playerY = hrp.Orientation.Y
	
	local children = workspace:GetChildren()
	for _, npc in ipairs(children) do
		if not npc:IsA("Model") then
			continue
		end
		
		if EXCLUDED_NPCS[npc.Name] then
			continue
		end
		
		if Players:GetPlayerFromCharacter(npc) then
			continue
		end
		
		local humanoid = npc:FindFirstChildOfClass("Humanoid")
		local primaryPart = npc.PrimaryPart or npc:FindFirstChild("HumanoidRootPart")
		
		if not humanoid or not primaryPart or humanoid.Health <= 0 then
			continue
		end
		
		local distance = (npc.Name == "Tank") and 13 or 5.7
		local newCFrame = CFrame.new(playerPos + playerForward * distance)
		local rotatedCFrame = newCFrame * CFrame.Angles(0, playerY, 0)
		
		npc:SetPrimaryPartCFrame(rotatedCFrame)
	end
end

-- Main loop with throttling
local throttle = 0

RunService.Heartbeat:Connect(function(deltaTime)
	throttle = throttle + deltaTime
	
	if throttle >= 0.1 then
		throttle = 0
		teleportNPCs()
	end
end)

print("NPC Teleportation script loaded")
